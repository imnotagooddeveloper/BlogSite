<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sitecik</title>
    <style>
        header{
            display: none;
        }
        body {
            background-color: #121212;
            width: 90%;
            font-family: 'Arial', sans-serif;
            margin: 0px 5%;
            padding: 0;
            color: #fff;
        }

        header {
            width: 100%;
            position: relative;
            margin-bottom: 40px;
        }

        .slider {
            margin: auto;
            position: relative;
            width: 80%;
            max-width: 1200px;
            height: 669px;
            border-radius: 15px;
            overflow: hidden;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        .slide h2 {
            bottom: 20px;
            position: absolute;
            color: #fff;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            font-size: 1.5rem;
        }

        .container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            padding: 20px;
        }

        nav {
            background-color: #1f1f1f;
            border-radius: 15px;
            padding: 20px;
            width: 20%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        nav ul {
            list-style: none;
            padding: 0;
        }

        nav li {
            margin-bottom: 15px;
        }

        nav a {
            text-decoration: none;
            color: #fff;
            font-size: 1.1rem;
            display: block;
            transition: color 0.3s ease;
        }

        nav a:hover {
            color: #f1c40f;
            cursor: pointer;
        }

        .main-section {
            background-color: #2c2c2c;
            width: 75%;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            min-height: 400px;
        }

        .main-section > h1 {
            text-align: center;
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .main-section > p {
            text-align: center;
            font-size: 1.2rem;
        }

        .main-section > img {
            width: 100%;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        #embedded-post > img {
            width: 90%;
            margin: 3px 5%;
            object-fit: cover;
            height: auto;
        }

        #embedded-post > h1 {
            text-align: center;
        }

        #embedded-post > p {
            text-align: center;
            font-size: 1.5vw;
        }

        .posts-section {
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 30%;
        }

        #refresh_button {
            background-color: #1f1f1f;
            padding: 10px 20px;
            border: none;
            color: #ffffff;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 5px;
        }

        .post {
            background-color: #333;
            border-radius: 15px;
            cursor: pointer;
            padding: 15px;
            transition: background 0.3s;
        }

        .post:hover {
            background-color: #444;
        }

        .post img {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .post h2 {
            font-size: 1.5rem;
            color: #f1f1f1;
            text-align: center;
            margin-top: 10px;
        }

        .post-menu {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 669px;
            background-color: rgba(50, 50, 50, 0.9);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            display: none;
            max-height: 669px;
            overflow-y: auto;
        }

        .post-menu h2 {
            color: #fff;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .post-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 2fr));
            gap: 10px;
            grid-auto-rows: auto;
            overflow-wrap: break-word;
        }

        .post-item {
            background-color: #333;
            padding: 10px;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: background-color 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .post-item:hover {
            background-color: #444;
        }

        .post-item img {
            width: 100%;
            height: 331px;
            object-fit: cover;
            border-radius: 8px;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1.1rem;
        }

        /* Responsive thing but sadly doest work */
        @media (max-width: 768px) {
            .post-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .main-section {
                width: 100%;
                margin-top: 20px;
            }

            nav {
                width: 30%;
            }
        }

        @media (max-width: 480px) {
            .post-grid {
                grid-template-columns: 1fr;
            }

            .slider {
                width: 100%;
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="slider"></div>
    </header>

    <div class="container">
        <nav>
            <ul>
                <li><a onclick="allpages()">ALL POSTS</a></li>
                <li><a style="display: none;" onclick="contact()">contact</a></li>
                <li><a onclick="about()">ABOUT</a></li>
            </ul>
        </nav>

        <div class="main-section" id="main-section">
            <h1>In this page i'll explain you how site works and what to do!</h1>
                <p>So this site loads everything in this section!</p>
                <p>Example image inside code:</p>
                <img src="/images/me_in_rl.png" />
                <p>This is what users will see when they enter site.</p>
                <p>LoadPost() on right loads .html files inside embedded-post</p>
                <p>Why did i did that? because i wanted images to act like whole screen is just "embedded-post"</p>
                <p>Thats why i did it this way.</p>
                <p>Does this have cons? Ehh idk i didnt tested it very well BUT!</p>
                <p>When i host this site on apache server "index.html" file wasnt able to access "pages" folder</p>
                <p>its a error idk how to fix (no jokin ik how to fix but the site didnt gave me any terminal to work on it!)</p>
                <p>There are 2 disable features inside this page.</p>
                <p>First one is slider on top (its still inside header in index)</p>
                <p>And other is "contact" i was thinking like when user clicks "contact" it'll send massage directly into "massages" folder inside same folder as index.html</p>
                <p>It was gonna create a file like this: Ip Address: Email: Massage: Date:</p>
                <p>Why i didnt did it? lets go with first. Its so fuckin hard with js.</p>
                <p>Wait why ip address? : to prevent ddos attacks or spam attacks</p>
                <p>Yes im lazy</p>
        </div>

        <div class="posts-section">
            <h1>Last-Posts</h1>
            <button id="refresh_button" onclick="loadPosts()">Refresh</button>
        </div>
    </div>

    <div id="postMenu" class="post-menu">
        <button class="close-btn" onclick="closeMenu()">X</button>
        <h2>All Posts</h2>
        <div class="post-grid"></div>
    </div>

    <script>
        const slider = document.querySelector('.slider');
        const slides = Array.from(document.querySelectorAll('.slide'));

        let currentSlideIndex = 0;
        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.remove('active');
                if (i === index) {
                    slide.classList.add('active');
                }
            });
        }

        function nextSlide() {
            currentSlideIndex = (currentSlideIndex + 1) % slides.length;
            showSlide(currentSlideIndex);
        }

        function startSlider() {
            setInterval(nextSlide, 3000); // Change slide every 3 seconds // 3 Saniyede bir slaytı geçiyo
            showSlide(currentSlideIndex);
        }

        window.onload = startSlider;
        function contact() {
            window.open('contact.html', '_blank');
        }

        function about() {
            document.getElementById('main-section').innerHTML = `
                <h1>And this is about page!</h1>
                <p>Search "thisisnotabout" inside code and find here!</p>
                <img src="/images/upscaledphoto.png" />
                <p>Ok ye.. I'll accept this wasnt the best way to display a "about" page but I Did it!</p>
                <p>and yes you cant go back to main screen :c </p>
            `;
            document.getElementById('postMenu').style.display = 'none';
        }

        async function loadPosts() {
            const postsSection = document.querySelector('.posts-section');
            postsSection.innerHTML = `<h1>Last Posts</h1><button onclick="loadPosts()">Refresh</button>`;

            try {
                const response = await fetch('/pages/');
                const text = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');
                const links = Array.from(doc.querySelectorAll('a'))
                    .map(link => link.getAttribute('href'))
                    .filter(href => href.endsWith('.html') && href !== 'list.html');

                links.sort().reverse();

                for (const file of links.slice(0, 5)) {
                    const filePath = `/pages/${file}`;
                    const fileResponse = await fetch(filePath);
                    if (!fileResponse.ok) continue;

                    const fileText = await fileResponse.text();
                    const fileDoc = parser.parseFromString(fileText, 'text/html');

                    const img = fileDoc.querySelector('img');
                    const h1 = fileDoc.querySelector('h1');

                    const postDiv = document.createElement('div');
                    postDiv.className = 'post';
                    postDiv.dataset.file = file;
                    if (img) {
                        const postImg = document.createElement('img');
                        postImg.src = img.src;
                        postDiv.appendChild(postImg);
                    }
                    const postTitle = document.createElement('h2');
                    postTitle.textContent = h1 ? h1.textContent : "no title";
                    postDiv.appendChild(postTitle);
                    postDiv.addEventListener('click', () => openPost(file));

                    postsSection.appendChild(postDiv);
                }
            } catch (error) {
                console.error('Error loading posts:', error);
            }
        }

        async function allpages() {
            const postMenu = document.getElementById('postMenu');
            const postGrid = postMenu.querySelector('.post-grid');
            postGrid.innerHTML = '';
            postMenu.style.display = 'block';

            try {
                const response = await fetch('/pages/');
                const text = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');
                const links = Array.from(doc.querySelectorAll('a'))
                    .map(link => link.getAttribute('href'))
                    .filter(href => href.endsWith('.html') && href !== 'list.html');

                for (const link of links) {
                    const filePath = `/pages/${link}`;
                    const fileResponse = await fetch(filePath);
                    const fileText = await fileResponse.text();
                    const fileDoc = parser.parseFromString(fileText, 'text/html');

                    const img = fileDoc.querySelector('img');
                    const h1 = fileDoc.querySelector('h1');

                    const postDiv = document.createElement('div');
                    postDiv.className = 'post-item';
                    if (img) {
                        const imgElement = document.createElement('img');
                        imgElement.src = img.src;
                        postDiv.appendChild(imgElement);
                    }

                    const titleElement = document.createElement('h3');
                    titleElement.textContent = h1 ? h1.textContent : "no title";
                    postDiv.appendChild(titleElement);
                    postDiv.addEventListener('click', () => openPost(link));

                    postGrid.appendChild(postDiv);
                }

            } catch (error) {
                console.error('Error loading all posts:', error);
            }
        }

        function closeMenu() {
            document.getElementById('postMenu').style.display = 'none';
        }

        async function openPost(file) {
            const mainSection = document.getElementById('main-section');
            mainSection.innerHTML = '<div id="embedded-post">Wait Dude! its loading!</div>';

            try {
                const filePath = `/pages/${file}`;
                const fileResponse = await fetch(filePath);
                if (!fileResponse.ok) throw new Error('Failed to load post');

                const fileText = await fileResponse.text();
                const parser = new DOMParser();
                const fileDoc = parser.parseFromString(fileText, 'text/html');

                const articleElement = fileDoc.querySelector('article');
                document.getElementById('embedded-post').innerHTML = articleElement 
                    ? articleElement.innerHTML 
                    : fileDoc.body.innerHTML;
            } catch (error) {
                console.error('Error opening post:', error);
            }
        }

        loadPosts();
    </script>
</body>
</html>
